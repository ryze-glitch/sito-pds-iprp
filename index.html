<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0043A4">
    <link rel="manifest" href="manifest.json">
    <title>Polizia di Stato - Portale Ufficiale</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #0043A4;
            --secondary-blue: #0066CC;
            --dark-blue: #001D3D;
            --light-blue: #E6F0FF;
            --accent-red: #DC2626;
            --text-dark: #1a1a1a;
            --text-gray: #4B5563;
            --bg-light: #F9FAFB;
            --success-green: #10B981;
            --warning-orange: #F59E0B;
            --font-size: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: #ffffff;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: var(--font-size);
        }

        body.dark-mode {
            background-color: #1a1a1a;
            color: #e5e7eb;
        }

        body.high-contrast {
            --primary-blue: #0000FF;
            --text-dark: #000000;
            --text-gray: #000000;
            background: #FFFFFF;
            color: #000000;
        }

        body.font-small { --font-size: 14px; }
        body.font-large { --font-size: 18px; }
        body.font-xlarge { --font-size: 20px; }

        body.dark-mode .navbar {
            background: linear-gradient(135deg, #000000 0%, #001D3D 100%);
        }

        body.dark-mode .service-card,
        body.dark-mode .annuncio-card,
        body.dark-mode .timeline-content,
        body.dark-mode .changelog-card,
        body.dark-mode .chi-siamo-card,
        body.dark-mode .contact-form,
        body.dark-mode .qualifiche-image-container,
        body.dark-mode .faq-item,
        body.dark-mode .modal-content {
            background: #2d2d2d;
            color: #e5e7eb;
        }

        body.dark-mode .section-white {
            background: #1a1a1a;
        }

        body.dark-mode .footer {
            background: linear-gradient(135deg, #000000 0%, #001D3D 100%);
        }

        /* Cookie Banner */
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            padding: 1.5rem;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            display: none;
            animation: slideUp 0.5s ease-out;
        }

        .cookie-banner.active {
            display: block;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .cookie-text {
            flex: 1;
            min-width: 300px;
        }

        .cookie-text h4 {
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .cookie-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cookie-accept {
            background: var(--success-green);
            color: white;
        }

        .cookie-accept:hover {
            background: #059669;
        }

        .cookie-settings {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .cookie-settings:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            padding: 2rem;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-gray);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: var(--text-dark);
        }

        .modal-header {
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            color: var(--dark-blue);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .modal-meta {
            color: var(--text-gray);
            font-size: 0.9rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .modal-body {
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .modal-share {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e5e7eb;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .share-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .share-btn.facebook { background: #1877f2; color: white; }
        .share-btn.twitter { background: #1da1f2; color: white; }
        .share-btn.whatsapp { background: #25d366; color: white; }
        .share-btn.pdf { background: #dc2626; color: white; }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Live Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,67,164,0.4);
            z-index: 999;
            transition: all 0.3s ease;
            animation: pulse-chat 2s infinite;
        }

        @keyframes pulse-chat {
            0%, 100% { box-shadow: 0 4px 20px rgba(0,67,164,0.4); }
            50% { box-shadow: 0 4px 30px rgba(0,67,164,0.6); }
        }

        .chat-widget:hover {
            transform: scale(1.1);
        }

        .chat-widget-icon {
            font-size: 1.8rem;
            color: white;
        }

        .chat-box {
            position: fixed;
            bottom: 170px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 40px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 999;
            animation: fadeIn 0.3s ease-out;
        }

        .chat-box.active {
            display: flex;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 1.5rem;
            border-radius: 16px 16px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-size: 1.1rem;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: #f9fafb;
        }

        .chat-message {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .chat-message.bot {
            background: var(--light-blue);
        }

        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.5rem;
        }

        .chat-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
        }

        .chat-send {
            padding: 0.75rem 1.5rem;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Accessibility Toolbar */
        .accessibility-toolbar {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            padding: 1rem;
            border-radius: 0 12px 12px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .accessibility-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: var(--light-blue);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .accessibility-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
        }

        .accessibility-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        /* Hero Carousel */
        .hero-carousel {
            position: relative;
            overflow: hidden;
        }

        .carousel-slide {
            display: none;
        }

        .carousel-slide.active {
            display: block;
        }

        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-dot.active {
            background: white;
            width: 30px;
            border-radius: 6px;
        }

        /* News Ticker */
        .news-ticker {
            background: var(--warning-orange);
            color: white;
            padding: 0.75rem 0;
            overflow: hidden;
            position: relative;
        }

        .ticker-content {
            display: flex;
            gap: 3rem;
            animation: ticker 30s linear infinite;
        }

        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-item {
            white-space: nowrap;
            font-weight: 600;
        }

        /* FAQ Section */
        .faq-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .faq-item {
            background: white;
            margin-bottom: 1rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-question {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--dark-blue);
            transition: background 0.3s ease;
        }

        .faq-question:hover {
            background: var(--light-blue);
        }

        .faq-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 1.5rem;
        }

        .faq-item.active .faq-answer {
            max-height: 500px;
            padding: 0 1.5rem 1.5rem;
        }

        .faq-answer p {
            color: var(--text-gray);
            line-height: 1.7;
        }

        /* Testimonials */
        .testimonials-slider {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
        }

        .testimonial-card {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            text-align: center;
            display: none;
        }

        .testimonial-card.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .testimonial-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
        }

        .testimonial-text {
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--text-dark);
            font-style: italic;
            margin-bottom: 1.5rem;
        }

        .testimonial-author {
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 0.25rem;
        }

        .testimonial-role {
            color: var(--text-gray);
            font-size: 0.9rem;
        }

        .testimonial-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .testimonial-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--primary-blue);
            background: white;
            color: var(--primary-blue);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .testimonial-btn:hover {
            background: var(--primary-blue);
            color: white;
        }

        /* Language Selector */
        .language-selector {
            position: relative;
            margin-left: 1rem;
        }

        .language-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            margin-top: 0.5rem;
            display: none;
            min-width: 150px;
        }

        .language-dropdown.active {
            display: block;
        }

        .language-option {
            padding: 0.75rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: background 0.3s ease;
            color: var(--text-dark);
        }

        .language-option:hover {
            background: var(--light-blue);
        }

        /* Weather Widget */
        .weather-widget {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .weather-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .weather-temp {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .weather-desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Newsletter */
        .newsletter-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            margin: 3rem 0;
        }

        .newsletter-box h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .newsletter-form {
            display: flex;
            gap: 1rem;
            max-width: 500px;
            margin: 2rem auto 0;
        }

        .newsletter-input {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
        }

        .newsletter-submit {
            padding: 1rem 2rem;
            background: white;
            color: var(--primary-blue);
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .newsletter-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Video Section */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .video-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .video-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 30px rgba(0,67,164,0.15);
        }

        .video-thumbnail {
            position: relative;
            padding-top: 56.25%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-play-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary-blue);
        }

        .video-info {
            padding: 1.5rem;
        }

        .video-title {
            font-weight: 700;
            color: var(--dark-blue);
            margin-bottom: 0.5rem;
        }

        .video-desc {
            color: var(--text-gray);
            font-size: 0.9rem;
        }

        /* QR Code */
        .qr-container {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .qr-code {
            width: 200px;
            height: 200px;
            margin: 1rem auto;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 3rem;
        }

        /* Print Styles */
        @media print {
            .navbar, .footer, .back-to-top, .chat-widget, .accessibility-toolbar, .cookie-banner {
                display: none !important;
            }
            body {
                background: white;
                color: black;
            }
        }

        /* Page Transition */
        .page-transition {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 31, 63, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scroll Progress Bar */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
            z-index: 9999;
            transition: width 0.1s ease;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 67, 164, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-to-top.visible {
            display: flex;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 67, 164, 0.4);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .toast {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            animation: slideIn 0.4s ease-out;
            border-left: 4px solid var(--success-green);
        }

        .toast.success { border-left-color: var(--success-green); }
        .toast.error { border-left-color: var(--accent-red); }
        .toast.info { border-left-color: var(--primary-blue); }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        .toast-message {
            flex: 1;
            font-weight: 600;
            color: var(--text-dark);
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-gray);
        }

        /* Badge Nuovo */
        .badge-new {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Breadcrumb */
        .breadcrumb {
            padding: 1.5rem 2rem;
            background: var(--bg-light);
            border-bottom: 1px solid #e5e7eb;
        }

        body.dark-mode .breadcrumb {
            background: #2d2d2d;
            border-bottom-color: #404040;
        }

        .breadcrumb-container {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--primary-blue);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: var(--secondary-blue);
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: var(--text-gray);
        }

        .breadcrumb-current {
            color: var(--text-gray);
            font-weight: 600;
        }

        /* Visitor Counter */
        .visitor-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            margin-top: 1rem;
        }

        .visitor-counter span {
            font-size: 1.1rem;
            font-weight: 700;
        }

        /* Link Utili Box */
        .link-utili-box {
            background: linear-gradient(135deg, var(--light-blue) 0%, white 100%);
            padding: 2.5rem;
            border-radius: 20px;
            margin: 3rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            border: 2px solid var(--primary-blue);
        }

        body.dark-mode .link-utili-box {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
        }

        .link-utili-box h3 {
            color: var(--dark-blue);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .link-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .link-card {
            background: white;
            padding: 1.2rem;
            border-radius: 12px;
            text-decoration: none;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        body.dark-mode .link-card {
            background: #404040;
            color: #e5e7eb;
        }

        .link-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,67,164,0.15);
        }

        .link-card-icon {
            font-size: 2rem;
        }

        .link-card-text h4 {
            font-size: 1rem;
            margin-bottom: 0.2rem;
            color: var(--primary-blue);
        }

        .link-card-text p {
            font-size: 0.8rem;
            color: var(--text-gray);
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.3rem;
            margin-left: 1rem;
        }

        .dark-mode-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(20deg);
        }

        /* Search Bar */
        .search-container {
            position: relative;
            margin-left: 1rem;
        }

        .search-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            color: white;
        }

        .search-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        .search-box {
            position: absolute;
            top: 60px;
            right: 0;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            display: none;
            min-width: 350px;
        }

        .search-box.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .search-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        /* Emergency Banner */
        .emergency-banner {
            background: linear-gradient(90deg, var(--accent-red) 0%, #B91C1C 100%);
            color: white;
            padding: 0.75rem;
            text-align: center;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
            position: relative;
            overflow: hidden;
        }

        .emergency-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Navbar */
        .navbar {
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 85px;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            color: white;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .nav-logo:hover {
            transform: translateY(-2px);
        }

        .nav-logo img {
            height: 55px;
            width: auto;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
        }

        .nav-logo-text h1 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.15rem;
            letter-spacing: -0.5px;
        }

        .nav-logo-text p {
            font-size: 0.75rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-menu {
            display: flex;
            gap: 0.5rem;
            list-style: none;
            align-items: center;
            margin: 0;
        }

        .nav-menu li {
            margin: 0;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.85rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1rem;
            gap: 0.4rem;
            border-radius: 8px;
            position: relative;
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 60%;
            height: 2px;
            background: white;
            transition: transform 0.3s ease;
        }

        .nav-menu a:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        .nav-menu a:hover::after {
            transform: translateX(-50%) scaleX(1);
        }

        .nav-menu a span.icon {
            font-size: 1.6rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .nav-menu a .nav-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .nav-menu .login-link {
            background: linear-gradient(135deg, #1E88E5 0%, #1565C0 100%);
            margin-left: 0.75rem;
            padding: 0.75rem 1.5rem;
            box-shadow: 0 4px 12px rgba(30, 136, 229, 0.3);
        }

        .nav-menu .login-link:hover {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            box-shadow: 0 6px 16px rgba(30, 136, 229, 0.4);
        }

        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .nav-menu-mobile {
            display: none;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--primary-blue) 50%, var(--secondary-blue) 100%);
            color: white;
            padding: 6rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
            animation: pulse 15s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            font-weight: 800;
            letter-spacing: -1px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.2);
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero p {
            font-size: 1.6rem;
            margin-bottom: 1rem;
            opacity: 0.95;
            font-weight: 400;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }

        .hero .subtitle {
            font-style: italic;
            opacity: 0.9;
            margin-bottom: 3rem;
            font-size: 1.2rem;
            animation: fadeInUp 0.8s ease-out 0.4s backwards;
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
            animation: fadeInUp 0.8s ease-out 0.6s backwards;
        }

        .btn-primary {
            background: white;
            color: var(--primary-blue);
            padding: 1.2rem 2.5rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .btn-primary:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 28px rgba(0,0,0,0.25);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            color: white;
            padding: 1.2rem 2.5rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-4px);
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            max-width: 900px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease-out 0.8s backwards;
        }

        .stat-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            padding: 2rem 1.5rem;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            background: rgba(255,255,255,0.25);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }

        .stat-card h3 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .stat-card p {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 500;
        }

        .stat-number {
            display: inline-block;
        }

        /* Container */
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Section */
        .section {
            padding: 5rem 2rem;
        }

        .section-white {
            background: var(--bg-light);
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--dark-blue);
            font-weight: 800;
            letter-spacing: -1px;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-gray);
            margin-bottom: 4rem;
            font-size: 1.2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            transition: all 0.4s ease;
            text-align: center;
            cursor: pointer;
            border: 1px solid rgba(0,67,164,0.1);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px rgba(0,67,164,0.15);
        }

        .service-card:hover::before {
            transform: scaleX(1);
        }

        .service-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.4s ease;
        }

        .service-card:hover .service-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark-blue);
            font-weight: 700;
        }

        .service-card p {
            color: var(--text-gray);
            line-height: 1.7;
            font-size: 1rem;
        }

        /* Annunci */
        .annunci-list {
            max-width: 1200px;
            margin: 0 auto;
        }

        .annuncio-card {
            background: white;
            border-left: 5px solid var(--secondary-blue);
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
        }

        .annuncio-card:hover {
            box-shadow: 0 8px 30px rgba(0,67,164,0.15);
            transform: translateX(8px);
        }

        .annuncio-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .badge-urgente {
            background: linear-gradient(135deg, var(--accent-red), #B91C1C);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .badge-normale {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            box-shadow: 0 4px 12px rgba(0, 67, 164, 0.3);
        }

        .annuncio-date {
            font-size: 0.95rem;
            color: var(--text-gray);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .annuncio-card h3 {
            font-size: 1.6rem;
            margin-bottom: 0.75rem;
            color: var(--dark-blue);
            font-weight: 700;
            line-height: 1.4;
        }

        .annuncio-meta {
            font-size: 0.95rem;
            color: var(--text-gray);
            margin-bottom: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .annuncio-card p {
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .annuncio-link {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .annuncio-link:hover {
            gap: 1rem;
            color: var(--secondary-blue);
        }

        /* Timeline Aggiornamenti */
        .timeline-container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }

        .timeline-line {
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--primary-blue), var(--secondary-blue));
            border-radius: 4px;
        }

        .timeline-item {
            position: relative;
            padding-left: 80px;
            margin-bottom: 3rem;
            animation: fadeInLeft 0.6s ease-out;
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timeline-icon {
            position: absolute;
            left: 0;
            top: 0;
            width: 60px;
            height: 60px;
            background: white;
            border: 4px solid var(--primary-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 15px rgba(0,67,164,0.2);
            z-index: 1;
        }

        .timeline-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 30px rgba(0,67,164,0.15);
        }

        .timeline-date {
            font-size: 0.9rem;
            color: var(--primary-blue);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .timeline-content h3 {
            font-size: 1.4rem;
            color: var(--dark-blue);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .timeline-content p {
            color: var(--text-gray);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .timeline-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .tag {
            background: var(--light-blue);
            color: var(--primary-blue);
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .changelog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .changelog-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            border-top: 4px solid var(--success-green);
            transition: all 0.3s ease;
        }

        .changelog-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 30px rgba(0,67,164,0.12);
        }

        .changelog-version {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark-blue);
            margin-bottom: 0.5rem;
        }

        .changelog-date {
            font-size: 0.9rem;
            color: var(--text-gray);
            margin-bottom: 1.5rem;
        }

        .changelog-list {
            list-style: none;
        }

        .changelog-list li {
            padding: 0.75rem 0;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            align-items: start;
            gap: 0.75rem;
            color: var(--text-dark);
        }

        .changelog-list li:last-child {
            border-bottom: none;
        }

        .changelog-list li::before {
            content: '✓';
            background: var(--success-green);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 2px;
        }

        /* Qualifiche Image Display */
        .qualifiche-image-container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin: 3rem auto;
            max-width: 1000px;
            text-align: center;
        }

        .qualifiche-image-container h3 {
            color: var(--dark-blue);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .qualifiche-image-container img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .qualifiche-image-container img:hover {
            transform: scale(1.02);
        }

        /* Emergency Section */
        .emergency-section {
            background: linear-gradient(135deg, var(--accent-red) 0%, #B91C1C 100%);
            color: white;
            padding: 5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .emergency-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .emergency-section .container {
            position: relative;
            z-index: 1;
        }

        .emergency-section h2 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            font-weight: 800;
            text-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .emergency-section p {
            font-size: 1.4rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
        }

        .emergency-button {
            background: white;
            color: var(--accent-red);
            padding: 1.8rem 3.5rem;
            border-radius: 16px;
            text-decoration: none;
            font-weight: 800;
            font-size: 1.8rem;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }

        .emergency-button:hover {
            transform: scale(1.08);
            box-shadow: 0 12px 40px rgba(0,0,0,0.3);
        }

        .emergency-note {
            margin-top: 1.5rem;
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
            color: white;
            padding: 4rem 2rem 2rem;
        }

        .footer-container {
            max-width: 1300px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h4 {
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.75rem;
        }

        .footer-section a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-section a:hover {
            color: white;
            padding-left: 5px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.2);
            opacity: 0.9;
        }

        .footer-social {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .footer-social a {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .footer-social a:hover {
            transform: translateY(-3px);
        }

        /* Page Content */
        .page-content {
            min-height: 60vh;
            padding: 5rem 2rem;
        }

        .page-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--dark-blue);
            font-weight: 800;
        }

        .page-content .subtitle {
            text-align: center;
            color: var(--text-gray);
            margin-bottom: 4rem;
            font-size: 1.2rem;
        }

        .filters {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.75rem 2rem;
            border-radius: 50px;
            border: 2px solid var(--light-blue);
            background: white;
            color: var(--primary-blue);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: var(--light-blue);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .contact-form {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            max-width: 800px;
            margin: 0 auto;
        }

        .contact-form h2 {
            margin-bottom: 2rem;
            color: var(--dark-blue);
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-blue);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 67, 164, 0.1);
        }

        .form-submit {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 67, 164, 0.3);
        }

        /* Chi Siamo */
        .chi-siamo-content {
            max-width: 1000px;
            margin: 0 auto;
        }

        .chi-siamo-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .chi-siamo-card {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            text-align: center;
        }

        .chi-siamo-card h3 {
            color: var(--dark-blue);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            font-weight: 700;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .nav-menu a {
                padding: 0.75rem 0.8rem;
                font-size: 0.8rem;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-item {
                padding-left: 70px;
            }

            .timeline-icon {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .accessibility-toolbar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .mobile-toggle {
                display: block;
            }

            .nav-menu-mobile {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--dark-blue);
                flex-direction: column;
                padding: 1rem;
                box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            }

            .nav-menu-mobile.active {
                display: flex;
            }

            .nav-menu-mobile li {
                margin: 0.5rem 0;
            }

            .nav-menu-mobile a {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem;
                color: white;
                text-decoration: none;
                border-radius: 8px;
                transition: background 0.3s ease;
            }

            .nav-menu-mobile a:hover {
                background: rgba(255,255,255,0.1);
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.2rem;
            }

            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .section-title {
                font-size: 2rem;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .changelog-grid {
                grid-template-columns: 1fr;
            }

            .back-to-top {
                bottom: 20px;
                right: 20px;
            }

            .chat-widget {
                bottom: 80px;
                right: 20px;
            }

            .chat-box {
                bottom: 150px;
                right: 20px;
                width: calc(100% - 40px);
            }

            .toast-container {
                right: 10px;
                left: 10px;
            }

            .toast {
                min-width: auto;
            }

            .dark-mode-toggle,
            .search-container,
            .language-selector {
                display: none;
            }

            .modal-content {
                padding: 2rem 1.5rem;
            }

            .cookie-content {
                flex-direction: column;
            }

            .newsletter-form {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Scroll Progress Bar -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">×</button>
            <div class="modal-header">
                <h2 id="modalTitle"></h2>
                <div class="modal-meta" id="modalMeta"></div>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-share">
                <h4>Condividi questa notizia</h4>
                <div class="share-buttons">
                    <button class="share-btn facebook" onclick="shareOn('facebook')">
                        📘 Facebook
                    </button>
                    <button class="share-btn twitter" onclick="shareOn('twitter')">
                        🐦 Twitter
                    </button>
                    <button class="share-btn whatsapp" onclick="shareOn('whatsapp')">
                        💬 WhatsApp
                    </button>
                    <button class="share-btn pdf" onclick="exportToPDF()">
                        📄 Esporta PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Accessibility Toolbar -->
    <div class="accessibility-toolbar">
        <button class="accessibility-btn" onclick="decreaseFontSize()" title="Riduci dimensione testo">
            A-
        </button>
        <button class="accessibility-btn" onclick="resetFontSize()" title="Dimensione normale">
            A
        </button>
        <button class="accessibility-btn" onclick="increaseFontSize()" title="Aumenta dimensione testo">
            A+
        </button>
        <button class="accessibility-btn" onclick="toggleHighContrast()" title="Alto contrasto">
            ◐
        </button>
    </div>

    <!-- Live Chat Widget -->
    <div class="chat-widget" onclick="toggleChat()">
        <div class="chat-widget-icon">💬</div>
    </div>

    <div class="chat-box" id="chatBox">
        <div class="chat-header">
            <h3>💬 Assistenza Online</h3>
            <button class="chat-close" onclick="toggleChat()">×</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot">
                <strong>Assistente Virtuale:</strong><br>
                Buongiorno! Come posso aiutarti oggi?
            </div>
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Scrivi un messaggio..." onkeypress="handleChatEnter(event)">
            <button class="chat-send" onclick="sendChatMessage()">Invia</button>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
        ↑
    </button>

    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="cookie-content">
            <div class="cookie-text">
                <h4>🍪 Questo sito utilizza i cookie</h4>
                <p>Utilizziamo i cookie per personalizzare contenuti e migliorare la tua esperienza. Continuando la navigazione accetti il loro utilizzo.</p>
            </div>
            <div class="cookie-buttons">
                <button class="cookie-btn cookie-accept" onclick="acceptCookies()">
                    Accetta Tutti
                </button>
                <button class="cookie-btn cookie-settings" onclick="openCookieSettings()">
                    Personalizza
                </button>
            </div>
        </div>
    </div>

    <!-- News Ticker -->
    <div class="news-ticker">
        <div class="ticker-content">
            <span class="ticker-item">🚨 ATTENZIONE: Nuova truffa telefonica in circolazione - Non fornire mai dati personali</span>
            <span class="ticker-item">📢 Apertura straordinaria uffici passaporti ogni sabato mattina</span>
            <span class="ticker-item">🎓 Nuovo bando concorso per 1.500 allievi agenti - Scadenza 31/12/2025</span>
            <span class="ticker-item">🚗 Operazione Strade Sicure: oltre 15.000 controlli effettuati</span>
            <!-- Duplicato per loop infinito -->
            <span class="ticker-item">🚨 ATTENZIONE: Nuova truffa telefonica in circolazione - Non fornire mai dati personali</span>
            <span class="ticker-item">📢 Apertura straordinaria uffici passaporti ogni sabato mattina</span>
            <span class="ticker-item">🎓 Nuovo bando concorso per 1.500 allievi agenti - Scadenza 31/12/2025</span>
            <span class="ticker-item">🚗 Operazione Strade Sicure: oltre 15.000 controlli effettuati</span>
        </div>
    </div>

    <!-- Emergency Banner -->
    <div class="emergency-banner">
        🚨 EMERGENZA 113 - Disponibile 24/7
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" onclick="navigateTo('home'); return false;" class="nav-logo">
                <img src="https://i.imgur.com/tkb2tfQ.png" alt="Logo Polizia di Stato">
                <div class="nav-logo-text">
                    <h1>Polizia di Stato</h1>
                    <p>Repubblica Italiana</p>
                </div>
            </a>
            <div class="nav-right">
                <ul class="nav-menu" id="navMenu">
                    <li>
                        <a href="#" onclick="navigateTo('home'); return false;">
                            <span class="icon">🏠</span>
                            <span class="nav-label">Home</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('notizie'); return false;">
                            <span class="icon">📰</span>
                            <span class="nav-label">Notizie</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('chi-siamo'); return false;">
                            <span class="icon">💬</span>
                            <span class="nav-label">Chi Siamo</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('veicoli'); return false;">
                            <span class="icon">🚗</span>
                            <span class="nav-label">Veicoli</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('qualifiche'); return false;">
                            <span class="icon">🎖️</span>
                            <span class="nav-label">Qualifiche</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('prenota'); return false;">
                            <span class="icon">📋</span>
                            <span class="nav-label">Prenota</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('concorso'); return false;">
                            <span class="icon">🎓</span>
                            <span class="nav-label">Concorso</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('aggiornamenti'); return false;">
                            <span class="icon">🔄</span>
                            <span class="nav-label">Aggiornamenti</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="navigateTo('login'); return false;" class="login-link">
                            <span class="icon">🏛️</span>
                            <span class="nav-label">Login</span>
                        </a>
                    </li>
                </ul>
                
                <!-- Language Selector -->
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguage()">
                        🌐 IT
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option" onclick="changeLanguage('it')">
                            <span>🇮🇹</span> Italiano
                        </div>
                        <div class="language-option" onclick="changeLanguage('en')">
                            <span>🇬🇧</span> English
                        </div>
                        <div class="language-option" onclick="changeLanguage('fr')">
                            <span>🇫🇷</span> Français
                        </div>
                        <div class="language-option" onclick="changeLanguage('de')">
                            <span>🇩🇪</span> Deutsch
                        </div>
                    </div>
                </div>

                <!-- Search Container -->
                <div class="search-container">
                    <button class="search-toggle" onclick="toggleSearch()">🔍</button>
                    <div class="search-box" id="searchBox">
                        <input type="text" class="search-input" placeholder="Cerca servizi, notizie..." onkeyup="handleSearch(event)">
                    </div>
                </div>

                <!-- Dark Mode Toggle -->
                <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Attiva/Disattiva modalità scura">
                    🌙
                </button>

                <button class="mobile-toggle" id="mobileToggle" onclick="toggleMobileMenu()">☰</button>
            </div>
        </div>
        <ul class="nav-menu-mobile" id="navMenuMobile">
            <li><a href="#" onclick="navigateTo('home'); return false;"><span>🏠</span> HOME</a></li>
            <li><a href="#" onclick="navigateTo('notizie'); return false;"><span>📰</span> NOTIZIE</a></li>
            <li><a href="#" onclick="navigateTo('chi-siamo'); return false;"><span>💬</span> CHI SIAMO</a></li>
            <li><a href="#" onclick="navigateTo('veicoli'); return false;"><span>🚗</span> VEICOLI</a></li>
            <li><a href="#" onclick="navigateTo('qualifiche'); return false;"><span>🎖️</span> QUALIFICHE</a></li>
            <li><a href="#" onclick="navigateTo('prenota'); return false;"><span>📋</span> PRENOTA</a></li>
            <li><a href="#" onclick="navigateTo('concorso'); return false;"><span>🎓</span> CONCORSO</a></li>
            <li><a href="#" onclick="navigateTo('aggiornamenti'); return false;"><span>🔄</span> AGGIORNAMENTI</a></li>
            <li><a href="#" onclick="navigateTo('login'); return false;"><span>🏛️</span> LOGIN</a></li>
        </ul>
    </nav>

    <!-- Main Content Area -->
    <div id="mainContent"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>Polizia di Stato</h4>
                <p style="opacity: 0.9; font-size: 0.95rem; line-height: 1.6;">
                    Al servizio dei cittadini italiani dal 1852. La nostra missione è garantire sicurezza, legalità e giustizia su tutto il territorio nazionale.
                </p>
                <div class="footer-social">
                    <a href="#">📘</a>
                    <a href="#">🐦</a>
                    <a href="#">📷</a>
                    <a href="#">▶️</a>
                </div>
                
                <!-- Visitor Counter -->
                <div class="visitor-counter">
                    <span>👥</span>
                    <span>Visitatori oggi: <strong id="visitorCount">0</strong></span>
                </div>
            </div>

            <div class="footer-section">
                <h4>Servizi</h4>
                <ul>
                    <li><a href="#" onclick="navigateTo('prenota'); return false;">Prenota Appuntamento</a></li>
                    <li><a href="#" onclick="navigateTo('veicoli'); return false;">Veicoli della Polizia</a></li>
                    <li><a href="#" onclick="navigateTo('qualifiche'); return false;">Qualifiche e Gradi</a></li>
                    <li><a href="#" onclick="navigateTo('concorso'); return false;">Concorsi Pubblici</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Informazioni</h4>
                <ul>
                    <li><a href="#" onclick="navigateTo('notizie'); return false;">Notizie e Comunicati</a></li>
                    <li><a href="#" onclick="navigateTo('aggiornamenti'); return false;">Aggiornamenti Sistema</a></li>
                    <li><a href="#" onclick="navigateTo('chi-siamo'); return false;">Chi Siamo</a></li>
                    <li><a href="#" onclick="navigateTo('faq'); return false;">FAQ</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Contatti</h4>
                <ul style="opacity: 0.9; font-size: 0.95rem;">
                    <li style="margin-bottom: 1rem;">📞 <strong>Emergenza:</strong> 113</li>
                    <li style="margin-bottom: 1rem;">📧 <strong>Email:</strong> info@poliziadistato.it</li>
                    <li>🏛️ <strong>Sede:</strong><br/>Via del Viminale, 1<br/>00184 Roma, Italia</li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p style="font-size: 0.95rem;">&copy; 2025 Polizia di Stato - Repubblica Italiana. Tutti i diritti riservati.</p>
        </div>
    </footer>

    <script>
// Global State
let currentPage = 'home';
let visitorCount = Math.floor(Math.random() * 5000) + 1000;
let currentLanguage = 'it';
let currentFilter = 'tutte';
let currentTestimonial = 0;
let carouselIndex = 0;

// Data
const notizie = [
    {
        id: 1,
        titolo: "Allerta Sicurezza: Nuova Truffa Telefonica",
        categoria: "URGENTE",
        contenuto: "La Polizia di Stato mette in guardia i cittadini da una nuova ondata di truffe telefoniche che si spaccia per operatori delle forze dell'ordine. Non fornite mai dati personali o bancari al telefono. Le forze dell'ordine non richiedono mai informazioni sensibili telefonicamente.",
        contenutoCompleto: "La Polizia di Stato ha rilevato un significativo aumento di tentativi di truffa telefonica in cui i malintenzionati si spacciano per operatori delle forze dell'ordine o di enti pubblici. I truffatori utilizzano tecniche sempre più sofisticate per convincere le vittime a fornire dati personali, codici bancari o effettuare bonifici. Ricordiamo che le forze dell'ordine non chiedono mai informazioni sensibili per telefono. In caso di dubbi, riagganciare e contattare direttamente la questura più vicina o il numero di emergenza 113.",
        data: "8 Ottobre 2025",
        autore: "Ufficio Stampa",
        priorita: "urgente",
        tipo: "urgente"
    },
    {
        id: 2,
        titolo: "Operazione 'Strade Sicure': Risultati del Mese",
        categoria: "COMUNICATO",
        contenuto: "Durante il mese di settembre sono stati effettuati oltre 15.000 controlli stradali con il sequestro di 230 veicoli non in regola e il ritiro di 450 patenti per guida in stato di ebbrezza. L'operazione continua con rinnovato impegno.",
        contenutoCompleto: "L'operazione 'Strade Sicure' della Polizia Stradale ha registrato risultati significativi nel mese di settembre 2025. Oltre 15.000 controlli su tutto il territorio nazionale hanno portato al sequestro di 230 veicoli risultati non in regola, al ritiro di 450 patenti per guida in stato di ebbrezza o sotto l'effetto di sostanze stupefacenti, e all'elevazione di oltre 3.000 sanzioni per infrazioni al codice della strada. L'operazione proseguirà nei prossimi mesi con controlli intensificati, soprattutto nelle ore notturne e nei weekend.",
        data: "5 Ottobre 2025",
        autore: "Polizia Stradale",
        priorita: "normale",
        tipo: "comunicato"
    },
    {
        id: 3,
        titolo: "Nuovi Orari Ufficio Passaporti",
        categoria: "SERVIZIO",
        contenuto: "A partire dal 15 ottobre, l'ufficio passaporti sarà aperto anche il sabato mattina dalle 9:00 alle 13:00 per facilitare i cittadini lavoratori. Prenotazione obbligatoria online tramite il portale dedicato.",
        contenutoCompleto: "Per venire incontro alle esigenze dei cittadini, a partire dal 15 ottobre 2025 l'ufficio passaporti delle questure sarà aperto anche il sabato mattina, dalle ore 9:00 alle ore 13:00. Questa iniziativa mira a facilitare i lavoratori che non possono recarsi agli uffici durante la settimana. La prenotazione dell'appuntamento resta obbligatoria e può essere effettuata esclusivamente online attraverso il portale dedicato. Si ricorda di presentarsi muniti di documento d'identità valido, codice fiscale e documentazione fotografica conforme.",
        data: "1 Ottobre 2025",
        autore: "Ufficio Immigrazione",
        priorita: "normale",
        tipo: "comunicato"
    },
    {
        id: 4,
        titolo: "Giornata 'Polizia nelle Scuole'",
        categoria: "EVENTO",
        contenuto: "Il 15 ottobre si terrà la giornata nazionale della Polizia nelle scuole per educare i giovani sulla legalità, sicurezza online e prevenzione del bullismo. Saranno coinvolte oltre 500 scuole su tutto il territorio nazionale.",
        contenutoCompleto: "Il 15 ottobre 2025 si terrà la quinta edizione della giornata nazionale 'Polizia nelle Scuole', un'iniziativa che vedrà la partecipazione di oltre 500 istituti scolastici su tutto il territorio nazionale. Gli agenti della Polizia di Stato incontreranno gli studenti per parlare di tematiche fondamentali come la legalità, la sicurezza online, la prevenzione del bullismo e del cyberbullismo, l'uso consapevole dei social media e i rischi delle dipendenze. L'obiettivo è creare un dialogo costruttivo con le nuove generazioni e sensibilizzarle sull'importanza del rispetto delle regole.",
        data: "28 Settembre 2025",
        autore: "Ufficio Minori",
        priorita: "normale",
        tipo: "evento"
    }
];

const aggiornamenti = [
    {
        data: "8 Ottobre 2025",
        icona: "🚀",
        titolo: "Lancio Nuovo Sistema di Prenotazione Online",
        descrizione: "È stato implementato un nuovo sistema di prenotazione online completamente rinnovato con interfaccia moderna e funzionalità avanzate per facilitare l'accesso ai servizi della Polizia di Stato.",
        tags: ["Sistema", "Prenotazioni", "UX"]
    },
    {
        data: "5 Ottobre 2025",
        icona: "🔐",
        titolo: "Aggiornamento Sicurezza Portale",
        descrizione: "Implementati nuovi protocolli di sicurezza per l'area riservata con autenticazione a due fattori e crittografia avanzata dei dati sensibili per garantire la massima protezione.",
        tags: ["Sicurezza", "Privacy", "Autenticazione"]
    },
    {
        data: "1 Ottobre 2025",
        icona: "📱",
        titolo: "App Mobile Aggiornata alla Versione 3.0",
        descrizione: "Rilasciata la nuova versione dell'app mobile con design rinnovato, notifiche push migliorate e nuove funzionalità per segnalazioni rapide e tracking delle pratiche.",
        tags: ["Mobile", "App", "Notifiche"]
    },
    {
        data: "28 Settembre 2025",
        icona: "💾",
        titolo: "Migrazione Database Completata",
        descrizione: "Completata con successo la migrazione del database su una nuova infrastruttura cloud più veloce e affidabile, con tempi di risposta ridotti del 40%.",
        tags: ["Database", "Performance", "Cloud"]
    },
    {
        data: "20 Settembre 2025",
        icona: "🎨",
        titolo: "Restyling Interfaccia Utente",
        descrizione: "Implementato un nuovo design system moderno e accessibile conforme alle linee guida WCAG 2.1 per garantire l'usabilità a tutti i cittadini.",
        tags: ["Design", "Accessibilità", "UI/UX"]
    }
];

const changelog = [
    {
        versione: "v3.2.0",
        data: "8 Ottobre 2025",
        modifiche: [
            "Nuovo sistema di prenotazione appuntamenti",
            "Migliorata velocità caricamento pagine del 35%",
            "Aggiunte notifiche push per aggiornamenti importanti",
            "Implementato dark mode per l'area riservata",
            "Corretti bug minori sull'interfaccia mobile"
        ]
    },
    {
        versione: "v3.1.5",
        data: "1 Ottobre 2025",
        modifiche: [
            "Aggiornati protocolli di sicurezza",
            "Ottimizzazione SEO per tutti i contenuti",
            "Nuovo sistema di ricerca intelligente",
            "Migliorata accessibilità WCAG 2.1 AA"
        ]
    },
    {
        versione: "v3.1.0",
        data: "20 Settembre 2025",
        modifiche: [
            "Restyling completo interfaccia utente",
            "Integrazione nuovo design system",
            "Migliorata esperienza mobile",
            "Aggiunti filtri avanzati per le notizie"
        ]
    }
];

const qualifiche = [
    { nome: "⭐ Dirigente Generale", descrizione: "Massima autorità operativa della Polizia di Stato" },
    { nome: "👮 Commissario Capo", descrizione: "Ruolo di coordinamento e gestione operativa" },
    { nome: "🎖️ Ispettore Superiore", descrizione: "Gestione investigazioni complesse e coordinamento squadre" },
    { nome: "👤 Agente Scelto", descrizione: "Operativo sul territorio con esperienza consolidata" },
    { nome: "🆕 Agente in Prova", descrizione: "Fase di formazione iniziale e addestramento" },
    { nome: "📊 Vice Ispettore", descrizione: "Supporto operativo e supervisione attività" }
];

const veicoli = [
    { nome: "Alfa Romeo Giulia Veloce", tipo: "Auto di pattuglia", descrizione: "Veicolo sportivo ad alte prestazioni per inseguimenti e pattugliamento urbano" },
    { nome: "Jeep Renegade 4x4", tipo: "SUV operativo", descrizione: "Mezzo versatile per terreni difficili e operazioni speciali" },
    { nome: "BMW R1250RT", tipo: "Moto Polizia Stradale", descrizione: "Motocicletta per pattugliamento rapido autostradale" },
    { nome: "Iveco Daily", tipo: "Cellulare", descrizione: "Trasporto sicuro persone fermate e detenuti" },
    { nome: "Mercedes Sprinter", tipo: "Unità Mobile", descrizione: "Centro di comando mobile per operazioni sul campo" },
    { nome: "Land Rover Defender", tipo: "Fuoristrada", descrizione: "Operazioni in zone impervie e montane" }
];

const linkUtili = [
    { nome: "Ministero dell'Interno", icon: "🏛️", desc: "Sito ufficiale", url: "#" },
    { nome: "Questure d'Italia", icon: "🗺️", desc: "Trova la tua questura", url: "#" },
    { nome: "App YouPol", icon: "📱", desc: "Segnalazioni rapide", url: "#" },
    { nome: "Commissariato Online", icon: "💻", desc: "Servizi digitali", url: "#" },
    { nome: "Polizia Scientifica", icon: "🔬", desc: "Investigazioni", url: "#" },
    { nome: "Polizia Stradale", icon: "🚦", desc: "Sicurezza stradale", url: "#" }
];

const faqData = [
    {
        question: "Come posso prenotare un appuntamento per il passaporto?",
        answer: "La prenotazione può essere effettuata esclusivamente online attraverso il portale dedicato. Seleziona la questura più vicina, scegli data e orario disponibili, e presenta la conferma al momento dell'appuntamento insieme ai documenti richiesti."
    },
    {
        question: "Quali documenti servono per fare una denuncia?",
        answer: "Per sporgere denuncia è necessario presentarsi presso qualsiasi commissariato o questura muniti di documento d'identità valido. È utile portare con sé eventuali prove o documentazione relativa al fatto da denunciare."
    },
    {
        question: "Come posso richiedere il certificato penale?",
        answer: "Il certificato penale può essere richiesto online tramite i servizi digitali o presso gli uffici della questura. La richiesta online è più veloce e consente di ricevere il certificato direttamente via email."
    },
    {
        question: "Cosa devo fare se ho perso i documenti?",
        answer: "In caso di smarrimento o furto di documenti, è necessario recarsi presso il commissariato più vicino per sporgere denuncia. Successivamente, si potrà procedere con la richiesta di duplicato presso gli uffici competenti."
    },
    {
        question: "Come posso partecipare ai concorsi della Polizia?",
        answer: "I bandi di concorso vengono pubblicati nella Gazzetta Ufficiale e sul nostro sito web. Per partecipare è necessario possedere i requisiti indicati nel bando e presentare domanda entro i termini stabiliti."
    },
    {
        question: "Posso segnalare un crimine in modo anonimo?",
        answer: "Sì, è possibile effettuare segnalazioni anonime attraverso l'app YouPol o contattando il numero verde dedicato. Tuttavia, per procedimenti formali potrebbe essere necessaria l'identità del denunciante."
    }
];

const testimonials = [
    {
        text: "Ho trovato grande professionalità e cortesia nel personale della Polizia di Stato. Hanno risolto il mio problema in tempi rapidissimi.",
        author: "Marco R.",
        role: "Cittadino - Roma",
        avatar: "M"
    },
    {
        text: "Grazie al nuovo sistema di prenotazione online ho potuto ottenere il mio passaporto senza lunghe attese. Servizio eccellente!",
        author: "Giulia T.",
        role: "Cittadina - Milano",
        avatar: "G"
    },
    {
        text: "L'app YouPol è fantastica! Ho potuto segnalare un problema nel mio quartiere e la risposta è stata immediata.",
        author: "Alessandro B.",
        role: "Cittadino - Napoli",
        avatar: "A"
    }
];

const videos = [
    {
        title: "Come Riconoscere le Truffe Online",
        description: "Guida pratica per proteggersi dalle truffe più comuni su internet",
        duration: "5:32"
    },
    {
        title: "La Polizia nelle Scuole 2025",
        description: "Reportage della giornata nazionale dedicata ai giovani",
        duration: "8:15"
    },
    {
        title: "Presentazione Nuovi Veicoli",
        description: "La nuova flotta di veicoli ad alte prestazioni",
        duration: "6:47"
    }
];

// Utility Functions
function showLoading() {
    document.getElementById('loadingOverlay').classList.add('active');
}

function hideLoading() {
    setTimeout(() => {
        document.getElementById('loadingOverlay').classList.remove('active');
    }, 300);
}

function showToast(message, type = 'success') {
    const container = document.getElementById('toastContainer');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icons = {
        success: '✅',
        error: '❌',
        info: 'ℹ️'
    };
    
    toast.innerHTML = `
        <div class="toast-icon">${icons[type]}</div>
        <div class="toast-message">${message}</div>
        <button class="toast-close" onclick="this.parentElement.remove()">×</button>
    `;
    
    container.appendChild(toast);
    
    setTimeout(() => {
        toast.remove();
    }, 4000);
}

function updateScrollProgress() {
    const winScroll = document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.getElementById('scrollProgress').style.width = scrolled + '%';
}

function updateBackToTop() {
    const btn = document.getElementById('backToTop');
    if (window.pageYOffset > 300) {
        btn.classList.add('visible');
    } else {
        btn.classList.remove('visible');
    }
}

function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    const isDark = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDark);
    const icon = document.querySelector('.dark-mode-toggle');
    icon.textContent = isDark ? '☀️' : '🌙';
    showToast(isDark ? 'Modalità scura attivata' : 'Modalità chiara attivata', 'info');
}

function toggleSearch() {
    const searchBox = document.getElementById('searchBox');
    searchBox.classList.toggle('active');
    if (searchBox.classList.contains('active')) {
        searchBox.querySelector('.search-input').focus();
    }
}

function handleSearch(event) {
    if (event.key === 'Enter') {
        const query = event.target.value;
        showToast(`Ricerca: "${query}" - Funzione in arrivo!`, 'info');
        toggleSearch();
    }
}

function updateVisitorCount() {
    visitorCount += Math.floor(Math.random() * 3);
    document.getElementById('visitorCount').textContent = visitorCount.toLocaleString();
}

function toggleLanguage() {
    const dropdown = document.getElementById('languageDropdown');
    dropdown.classList.toggle('active');
}

function changeLanguage(lang) {
    currentLanguage = lang;
    const langNames = {
        it: '🇮🇹 IT',
        en: '🇬🇧 EN',
        fr: '🇫🇷 FR',
        de: '🇩🇪 DE'
    };
    document.querySelector('.language-btn').innerHTML = langNames[lang];
    toggleLanguage();
    showToast(`Lingua cambiata: ${langNames[lang]}`, 'info');
}

function toggleChat() {
    const chatBox = document.getElementById('chatBox');
    chatBox.classList.toggle('active');
}

function sendChatMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        const messagesDiv = document.getElementById('chatMessages');
        messagesDiv.innerHTML += `
            <div class="chat-message">
                <strong>Tu:</strong><br>
                ${message}
            </div>
        `;
        
        input.value = '';
        
        // Risposta automatica
        setTimeout(() => {
            messagesDiv.innerHTML += `
                <div class="chat-message bot">
                    <strong>Assistente Virtuale:</strong><br>
                    Grazie per il tuo messaggio. Un operatore ti risponderà a breve. Per urgenze chiama il 113.
                </div>
            `;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
        
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
}

function handleChatEnter(event) {
    if (event.key === 'Enter') {
        sendChatMessage();
    }
}

function acceptCookies() {
    localStorage.setItem('cookiesAccepted', 'true');
    document.getElementById('cookieBanner').classList.remove('active');
    showToast('Preferenze cookie salvate', 'success');
}

function openCookieSettings() {
    showToast('Impostazioni cookie - Funzione in arrivo!', 'info');
    acceptCookies();
}

function openModal(notiziaId) {
    const notizia = notizie.find(n => n.id === notiziaId);
    if (!notizia) return;
    
    document.getElementById('modalTitle').textContent = notizia.titolo;
    document.getElementById('modalMeta').innerHTML = `
        <span>📅 ${notizia.data}</span>
        <span>👤 ${notizia.autore}</span>
        <span class="badge badge-${notizia.priorita}">${notizia.categoria}</span>
    `;
    document.getElementById('modalBody').innerHTML = `<p style="line-height: 1.9; font-size: 1.05rem;">${notizia.contenutoCompleto}</p>`;
    document.getElementById('modalOverlay').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal(event) {
    if (!event || event.target.id === 'modalOverlay') {
        document.getElementById('modalOverlay').classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

function shareOn(platform) {
    const url = window.location.href;
    const text = document.getElementById('modalTitle').textContent;
    
    const urls = {
        facebook: `https://www.facebook.com/sharer/sharer.php?u=${url}`,
        twitter: `https://twitter.com/intent/tweet?url=${url}&text=${text}`,
        whatsapp: `https://wa.me/?text=${text} ${url}`
    };
    
    if (urls[platform]) {
        window.open(urls[platform], '_blank');
        showToast(`Condiviso su ${platform}!`, 'success');
    }
}

function exportToPDF() {
    showToast('Esportazione PDF - Funzione in arrivo!', 'info');
}

function decreaseFontSize() {
    document.body.classList.remove('font-large', 'font-xlarge');
    document.body.classList.add('font-small');
    showToast('Dimensione testo ridotta', 'info');
}

function resetFontSize() {
    document.body.classList.remove('font-small', 'font-large', 'font-xlarge');
    showToast('Dimensione testo normale', 'info');
}

function increaseFontSize() {
    document.body.classList.remove('font-small');
    if (document.body.classList.contains('font-large')) {
        document.body.classList.remove('font-large');
        document.body.classList.add('font-xlarge');
    } else {
        document.body.classList.add('font-large');
    }
    showToast('Dimensione testo aumentata', 'info');
}

function toggleHighContrast() {
    document.body.classList.toggle('high-contrast');
    const isActive = document.body.classList.contains('high-contrast');
    showToast(isActive ? 'Alto contrasto attivato' : 'Alto contrasto disattivato', 'info');
}

function filterNotizie(tipo) {
    currentFilter = tipo;
    
    // Update filter buttons
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Filter news
    const filtered = tipo === 'tutte' 
        ? notizie 
        : notizie.filter(n => n.tipo === tipo);
    
    const listDiv = document.querySelector('.annunci-list');
    listDiv.innerHTML = filtered.map(notizia => `
        <div class="annuncio-card">
            <div class="annuncio-header">
                <span class="badge badge-${notizia.priorita}">${notizia.categoria}</span>
                <div class="annuncio-date">📅 ${notizia.data}</div>
            </div>
            <h3>${notizia.titolo}</h3>
            <div class="annuncio-meta">👤 ${notizia.autore}</div>
            <p>${notizia.contenuto}</p>
            <a class="annuncio-link" onclick="openModal(${notizia.id})">Leggi tutto <span>→</span></a>
        </div>
    `).join('');
}

function toggleFAQ(index) {
    const faqItems = document.querySelectorAll('.faq-item');
    const clickedItem = faqItems[index];
    
    // Close all others
    faqItems.forEach((item, i) => {
        if (i !== index) {
            item.classList.remove('active');
        }
    });
    
    // Toggle clicked
    clickedItem.classList.toggle('active');
}

function changeTestimonial(direction) {
    currentTestimonial += direction;
    if (currentTestimonial < 0) currentTestimonial = testimonials.length - 1;
    if (currentTestimonial >= testimonials.length) currentTestimonial = 0;
    
    document.querySelectorAll('.testimonial-card').forEach((card, index) => {
        card.classList.remove('active');
        if (index === currentTestimonial) {
            card.classList.add('active');
        }
    });
}

function animateNumbers() {
    const stats = document.querySelectorAll('.stat-number');
    stats.forEach(stat => {
        const target = stat.textContent;
        const isPlus = target.includes('+');
        const num = parseInt(target.replace(/[^0-9]/g, ''));
        let current = 0;
        const increment = num / 50;
        const timer = setInterval(() => {
            current += increment;
            if (current >= num) {
                stat.textContent = target;
                clearInterval(timer);
            } else {
                stat.textContent = Math.floor(current) + (isPlus ? 'K+' : '');
            }
        }, 30);
    });
}

// Navigation
function navigateTo(page) {
    showLoading();
    
    const content = document.getElementById('mainContent');
    const mobileMenu = document.getElementById('navMenuMobile');
    mobileMenu.classList.remove('active');
    document.getElementById('mobileToggle').textContent = '☰';
    
    currentPage = page;
    
    setTimeout(() => {
        window.scrollTo({top: 0, behavior: 'smooth'});
        
        switch(page) {
            case 'home': content.innerHTML = getHomePage(); break;
            case 'notizie': content.innerHTML = getNotizePage(); break;
            case 'aggiornamenti': content.innerHTML = getAggiornmentiPage(); break;
            case 'chi-siamo': content.innerHTML = getChiSiamoPage(); break;
            case 'veicoli': content.innerHTML = getVeicoliPage(); break;
            case 'qualifiche': content.innerHTML = getQualifichePage(); break;
            case 'prenota': content.innerHTML = getPrenotaPage(); break;
            case 'concorso': content.innerHTML = getConcorsoPage(); break;
            case 'faq': content.innerHTML = getFAQPage(); break;
            case 'login': content.innerHTML = getLoginPage(); break;
            default: content.innerHTML = getHomePage();
        }
        
        content.classList.add('page-transition');
        
        // Animate numbers on home page
        if (page === 'home') {
            setTimeout(animateNumbers, 500);
        }
        
        hideLoading();
    }, 400);
}

function toggleMobileMenu() {
    const mobileMenu = document.getElementById('navMenuMobile');
    const toggle = document.getElementById('mobileToggle');
    mobileMenu.classList.toggle('active');
    toggle.textContent = mobileMenu.classList.contains('active') ? '✕' : '☰';
}

function getBreadcrumb(page) {
    const breadcrumbs = {
        home: 'Home',
        notizie: 'Notizie',
        aggiornamenti: 'Aggiornamenti',
        'chi-siamo': 'Chi Siamo',
        veicoli: 'Veicoli della Polizia',
        qualifiche: 'Qualifiche e Gradi',
        prenota: 'Prenota Servizio',
        concorso: 'Concorsi Pubblici',
        faq: 'Domande Frequenti',
        login: 'Area Riservata'
    };

    if (page === 'home') return '';

    return `
        <div class="breadcrumb">
            <div class="breadcrumb-container">
                <a href="#" onclick="navigateTo('home'); return false;">Home</a>
                <span class="breadcrumb-separator">›</span>
                <span class="breadcrumb-current">${breadcrumbs[page]}</span>
            </div>
        </div>
    `;
}

// Pages Functions
function getHomePage() {
    return `
        <section class="hero hero-carousel">
            <div class="carousel-slide active">
                <div class="hero-content">
                    <h1>Polizia di Stato</h1>
                    <p>Al servizio della sicurezza e della giustizia</p>
                    <p class="subtitle">"Esserci Sempre"</p>
                    
                    <div class="hero-buttons">
                        <a href="tel:113" class="btn-primary">
                            <span>📞</span> Emergenza 113
                        </a>
                        <a href="#" onclick="navigateTo('prenota'); return false;" class="btn-secondary">
                            <span>📋</span> Prenota Servizi
                        </a>
                    </div>

                    <div class="hero-stats">
                        <div class="stat-card">
                            <h3><span class="stat-number">24/7</span></h3>
                            <p>Sempre Operativi</p>
                        </div>
                        <div class="stat-card">
                            <h3><span class="stat-number">100K+</span></h3>
                            <p>Agenti in Servizio</p>
                        </div>
                        <div class="stat-card">
                            <h3><span class="stat-number">1000+</span></h3>
                            <p>Uffici Territoriali</p>
                        </div>
                        <div class="stat-card">
                            <h3><span class="stat-number">170</span></h3>
                            <p>Anni di Storia</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 class="section-title">I Nostri Servizi</h2>
                <p class="section-subtitle">Accedi rapidamente ai servizi e alle informazioni della Polizia di Stato</p>
                <div class="services-grid">
                    <div class="service-card" onclick="navigateTo('notizie')" style="position: relative;">
                        <div class="service-icon">📰</div>
                        <h3>Notizie</h3>
                        <p>Ultimi comunicati ufficiali e aggiornamenti sulla sicurezza pubblica</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('aggiornamenti')" style="position: relative;">
                        <span class="badge-new">Nuovo</span>
                        <div class="service-icon">🔄</div>
                        <h3>Aggiornamenti</h3>
                        <p>Modifiche, miglioramenti e changelog del portale ufficiale</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('chi-siamo')">
                        <div class="service-icon">💬</div>
                        <h3>Chi Siamo</h3>
                        <p>Storia, missione e valori della Polizia di Stato italiana</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('veicoli')">
                        <div class="service-icon">🚗</div>
                        <h3>Veicoli</h3>
                        <p>Flotta operativa e mezzi speciali al servizio della sicurezza</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('qualifiche')">
                        <div class="service-icon">🎖️</div>
                        <h3>Qualifiche</h3>
                        <p>Struttura gerarchica e ruoli del personale della Polizia</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('prenota')">
                        <div class="service-icon">📋</div>
                        <h3>Prenota</h3>
                        <p>Sistema di prenotazione online per tutti i servizi</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('concorso')">
                        <div class="service-icon">🎓</div>
                        <h3>Concorso</h3>
                        <p>Bandi attivi e opportunità di carriera nella Polizia</p>
                    </div>
                    <div class="service-card" onclick="navigateTo('faq')" style="position: relative;">
                        <span class="badge-new">Nuovo</span>
                        <div class="service-icon">❓</div>
                        <h3>FAQ</h3>
                        <p>Risposte alle domande più frequenti dei cittadini</p>
                    </div>
                </div>

                <div class="link-utili-box">
                    <h3>🔗 Link Utili</h3>
                    <div class="link-grid">
                        ${linkUtili.map(link => `
                            <a href="${link.url}" class="link-card">
                                <div class="link-card-icon">${link.icon}</div>
                                <div class="link-card-text">
                                    <h4>${link.nome}</h4>
                                    <p>${link.desc}</p>
                                </div>
                            </a>
                        `).join('')}
                    </div>
                </div>

                <!-- Weather Widget -->
                <div style="max-width: 300px; margin: 3rem auto;">
                    <div class="weather-widget">
                        <div class="weather-icon">☀️</div>
                        <div class="weather-temp">22°C</div>
                        <div class="weather-desc">Roma - Sereno</div>
                        <p style="margin-top: 0.5rem; font-size: 0.85rem; opacity: 0.9;">Condizioni ottime per la guida</p>
                    </div>
                </div>

                <!-- Testimonials -->
                <h2 class="section-title" style="margin-top: 5rem;">💬 Cosa Dicono i Cittadini</h2>
                <p class="section-subtitle">Testimonianze di chi ha utilizzato i nostri servizi</p>
                
                <div class="testimonials-slider">
                    ${testimonials.map((t, index) => `
                        <div class="testimonial-card ${index === 0 ? 'active' : ''}">
                            <div class="testimonial-avatar">${t.avatar}</div>
                            <p class="testimonial-text">"${t.text}"</p>
                            <div class="testimonial-author">${t.author}</div>
                            <div class="testimonial-role">${t.role}</div>
                        </div>
                    `).join('')}
                    
                    <div class="testimonial-nav">
                        <button class="testimonial-btn" onclick="changeTestimonial(-1)">←</button>
                        <button class="testimonial-btn" onclick="changeTestimonial(1)">→</button>
                    </div>
                </div>

                <!-- Video Section -->
                <h2 class="section-title" style="margin-top: 5rem;">🎥 Video Istituzionali</h2>
                <p class="section-subtitle">Contenuti multimediali e guide video</p>
                
                <div class="video-grid">
                    ${videos.map(video => `
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <div class="video-play-btn">▶</div>
                            </div>
                            <div class="video-info">
                                <div class="video-title">${video.title}</div>
                                <p class="video-desc">${video.description}</p>
                                <span style="color: var(--text-gray); font-size: 0.85rem;">⏱ ${video.duration}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <!-- Newsletter -->
                <div class="newsletter-box">
                    <h3>📬 Iscriviti alla Newsletter</h3>
                    <p style="opacity: 0.95; margin-top: 0.5rem;">Ricevi aggiornamenti su notizie, servizi e concorsi direttamente nella tua email</p>
                    <form class="newsletter-form" onsubmit="event.preventDefault(); showToast('Iscrizione effettuata!', 'success');">
                        <input type="email" class="newsletter-input" placeholder="La tua email" required>
                        <button type="submit" class="newsletter-submit">Iscriviti</button>
                    </form>
                </div>

                <!-- QR Code -->
                <div class="qr-container" style="margin-top: 3rem;">
                    <h3 style="color: var(--dark-blue); margin-bottom: 1rem;">📱 Scarica l'App Mobile</h3>
                    <div class="qr-code">
                        📱
                    </div>
                    <p style="color: var(--text-gray);">Scansiona il QR code per scaricare l'app YouPol</p>
                </div>
            </div>
        </section>

        <section class="emergency-section">
            <div class="container">
                <h2>🚨 Emergenza 113</h2>
                <p>In caso di emergenza, contatta immediatamente il numero unico di emergenza</p>
                <a href="tel:113" class="emergency-button">📞 Chiama 113</a>
                <p class="emergency-note">Servizio attivo 24 ore su 24, 7 giorni su 7, 365 giorni all'anno</p>
            </div>
        </section>
    `;
}

function getNotizePage() {
    return getBreadcrumb('notizie') + `
        <div class="page-content">
            <div class="container">
                <h1>📰 Notizie Ufficiali</h1>
                <p class="subtitle">Comunicati stampa e aggiornamenti dalla Polizia di Stato</p>
                
                <div class="filters">
                    <button class="filter-btn active" onclick="filterNotizie('tutte')">Tutte</button>
                    <button class="filter-btn" onclick="filterNotizie('urgente')">Urgenti</button>
                    <button class="filter-btn" onclick="filterNotizie('comunicato')">Comunicati</button>
                    <button class="filter-btn" onclick="filterNotizie('evento')">Eventi</button>
                </div>

                <div class="annunci-list">
                    ${notizie.map(notizia => `
                        <div class="annuncio-card">
                            <div class="annuncio-header">
                                <span class="badge badge-${notizia.priorita}">${notizia.categoria}</span>
                                <div class="annuncio-date">📅 ${notizia.data}</div>
                            </div>
                            <h3>${notizia.titolo}</h3>
                            <div class="annuncio-meta">👤 ${notizia.autore}</div>
                            <p>${notizia.contenuto}</p>
                            <a class="annuncio-link" onclick="openModal(${notizia.id})">Leggi tutto <span>→</span></a>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `;
}

function getAggiornmentiPage() {
    return getBreadcrumb('aggiornamenti') + `
        <div class="page-content section-white">
            <div class="container">
                <h1>🔄 Aggiornamenti Sistema</h1>
                <p class="subtitle">Timeline delle ultime modifiche, miglioramenti e nuove funzionalità del portale</p>
                
                <div class="timeline-container">
                    <div class="timeline-line"></div>
                    ${aggiornamenti.map(agg => `
                        <div class="timeline-item">
                            <div class="timeline-icon">${agg.icona}</div>
                            <div class="timeline-content">
                                <div class="timeline-date">${agg.data}</div>
                                <h3>${agg.titolo}</h3>
                                <p>${agg.descrizione}</p>
                                <div class="timeline-tags">
                                    ${agg.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <h2 style="text-align: center; font-size: 2.5rem; color: var(--dark-blue); margin: 5rem 0 3rem; font-weight: 800;">
                    📋 Changelog Versioni
                </h2>

                <div class="changelog-grid">
                    ${changelog.map(version => `
                        <div class="changelog-card">
                            <div class="changelog-version">${version.versione}</div>
                            <div class="changelog-date">📅 ${version.data}</div>
                            <ul class="changelog-list">
                                ${version.modifiche.map(modifica => `<li>${modifica}</li>`).join('')}
                            </ul>
                        </div>
                    `).join('')}
                </div>

                <div style="background: linear-gradient(135deg, var(--light-blue) 0%, white 100%); padding: 3rem; border-radius: 20px; margin-top: 4rem; text-align: center; border: 2px solid var(--primary-blue);">
                    <h3 style="color: var(--dark-blue); font-size: 1.8rem; margin-bottom: 1rem; font-weight: 700;">
                        💡 Hai suggerimenti o feedback?
                    </h3>
                    <p style="color: var(--text-gray); font-size: 1.1rem; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                        Il tuo feedback è prezioso! Aiutaci a migliorare il portale segnalando problemi o suggerendo nuove funzionalità.
                    </p>
                    <a href="#" onclick="navigateTo('prenota'); return false;" class="btn-primary" style="display: inline-flex;">
                        <span>📧</span> Invia Feedback
                    </a>
                </div>
            </div>
        </div>
    `;
}

function getFAQPage() {
    return getBreadcrumb('faq') + `
        <div class="page-content section-white">
            <div class="container">
                <h1>❓ Domande Frequenti</h1>
                <p class="subtitle">Trova rapidamente le risposte alle domande più comuni</p>
                
                <div class="faq-container">
                    ${faqData.map((faq, index) => `
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(${index})">
                                <span>${faq.question}</span>
                                <span class="faq-icon">▼</span>
                            </div>
                            <div class="faq-answer">
                                <p>${faq.answer}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: var(--light-blue); padding: 3rem; border-radius: 20px; margin-top: 4rem; text-align: center;">
                    <h3 style="color: var(--dark-blue); font-size: 1.8rem; margin-bottom: 1rem;">
                        Non hai trovato la risposta?
                    </h3>
                    <p style="color: var(--text-gray); font-size: 1.1rem; margin-bottom: 2rem;">
                        Contatta il nostro servizio di assistenza o utilizza la chat online
                    </p>
                    <button class="btn-primary" onclick="toggleChat()" style="display: inline-flex;">
                        💬 Apri Chat
                    </button>
                </div>
            </div>
        </div>
    `;
}

function getChiSiamoPage() {
    return getBreadcrumb('chi-siamo') + `
        <div class="page-content section-white">
            <div class="container chi-siamo-content">
                <h1>💬 Chi Siamo</h1>
                <p class="subtitle">Storia, missione e valori della Polizia di Stato</p>
                
                <div style="background: white; padding: 3rem; border-radius: 20px; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border-left: 5px solid var(--primary-blue);">
                    <h2 style="color: var(--dark-blue); margin-bottom: 1.5rem; font-size: 2rem;">La Nostra Storia</h2>
                    <p style="line-height: 1.9; color: var(--text-dark); margin-bottom: 1.5rem; font-size: 1.05rem;">
                        La Polizia di Stato è una delle forze di polizia italiane, dipendente dal Dipartimento della pubblica sicurezza, 
                        organismo del Ministero dell'interno. Istituita nel 1981, ha ereditato il patrimonio storico e operativo 
                        della Polizia di Stato precedentemente militarizzata.
                    </p>
                    <p style="line-height: 1.9; color: var(--text-dark); font-size: 1.05rem;">
                        Con oltre 100.000 operatori, la Polizia di Stato è presente su tutto il territorio nazionale con 
                        questure, commissariati e specialità operative. La nostra missione è garantire la sicurezza dei cittadini, 
                        prevenire e contrastare la criminalità, e tutelare l'ordine e la sicurezza pubblica.
                    </p>
                </div>

                <div class="chi-siamo-cards">
                    <div class="chi-siamo-card">
                        <div class="service-icon">🎯</div>
                        <h3>La Nostra Missione</h3>
                        <p style="line-height: 1.7; color: var(--text-gray);">Garantire la sicurezza pubblica e tutelare i diritti dei cittadini su tutto il territorio nazionale con professionalità e dedizione.</p>
                    </div>
                    <div class="chi-siamo-card">
                        <div class="service-icon">⚖️</div>
                        <h3>I Nostri Valori</h3>
                        <p style="line-height: 1.7; color: var(--text-gray);">Legalità, integrità, trasparenza e rispetto dei diritti umani guidano ogni nostra azione quotidiana.</p>
                    </div>
                    <div class="chi-siamo-card">
                        <div class="service-icon">🤝</div>
                        <h3>Il Nostro Impegno</h3>
                        <p style="line-height: 1.7; color: var(--text-gray);">Al servizio della comunità con dedizione, onestà e senso del dovere 24 ore su 24, 365 giorni all'anno.</p>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function getVeicoliPage() {
    return getBreadcrumb('veicoli') + `
        <div class="page-content">
            <div class="container">
                <h1>🚗 Veicoli della Polizia</h1>
                <p class="subtitle">Flotta operativa e mezzi speciali al servizio della sicurezza</p>
                
                <div class="services-grid">
                    ${veicoli.map(veicolo => `
                        <div class="service-card">
                            <div class="service-icon">🚓</div>
                            <h3>${veicolo.nome}</h3>
                            <p style="color: var(--primary-blue); font-weight: 700; margin-bottom: 0.75rem; font-size: 0.95rem;">${veicolo.tipo}</p>
                            <p>${veicolo.descrizione}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `;
}

function getQualifichePage() {
    return getBreadcrumb('qualifiche') + `
        <div class="page-content section-white">
            <div class="container">
                <h1>🎖️ Qualifiche e Gradi</h1>
                <p class="subtitle">Struttura gerarchica del personale della Polizia di Stato</p>
                
                <div class="qualifiche-image-container">
                    <h3>📊 Tabella Completa dei Gradi della Polizia di Stato</h3>
                    <img src="https://i.imgur.com/Bddg5nl.png" alt="Gradi Polizia di Stato">
                    <p style="margin-top: 1.5rem; color: var(--text-gray); font-size: 0.95rem;">
                        Visualizzazione ufficiale della gerarchia e dei distintivi di grado
                    </p>
                </div>

                <div class="services-grid">
                    ${qualifiche.map(qualifica => `
                        <div class="service-card">
                            <h3 style="font-size: 1.4rem; margin-bottom: 1.25rem; color: var(--dark-blue);">${qualifica.nome}</h3>
                            <p style="line-height: 1.7;">${qualifica.descrizione}</p>
                        </div>
                    `).join('')}
                </div>

                <div style="background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%); color: white; padding: 3rem; border-radius: 20px; margin-top: 4rem; text-align: center;">
                    <h2 style="margin-bottom: 1rem; font-size: 2rem;">Gerarchia Operativa</h2>
                    <p style="max-width: 700px; margin: 0 auto; line-height: 1.8; opacity: 0.95; font-size: 1.05rem;">
                        La Polizia di Stato è organizzata secondo una struttura gerarchica che garantisce efficienza operativa 
                        e catena di comando chiara. Ogni grado ha responsabilità specifiche e contribuisce alla missione 
                        complessiva di sicurezza pubblica.
                    </p>
                </div>
            </div>
        </div>
    `;
}

function getPrenotaPage() {
    return getBreadcrumb('prenota') + `
        <div class="page-content section-white">
            <div class="container">
                <h1>📋 Prenota un Servizio</h1>
                <p class="subtitle">Sistema di prenotazione online per tutti i servizi della Polizia di Stato</p>
                
                <div class="contact-form">
                    <h2>Modulo di Prenotazione</h2>
                    <form onsubmit="handlePrenotaSubmit(event)">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Nome *</label>
                                <input type="text" placeholder="Il tuo nome" required>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Cognome *</label>
                                <input type="text" placeholder="Il tuo cognome" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" placeholder="tua@email.it" required>
                        </div>
                        <div class="form-group">
                            <label>Telefono *</label>
                            <input type="tel" placeholder="+39 123 456 7890" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo di Servizio *</label>
                            <select required>
                                <option value="">Seleziona un servizio</option>
                                <option value="passaporto">Rilascio Passaporto</option>
                                <option value="denuncia">Denuncia</option>
                                <option value="porto-armi">Porto d'Armi</option>
                                <option value="certificato">Certificato Penale</option>
                                <option value="altro">Altro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data Preferita *</label>
                            <input type="date" required>
                        </div>
                        <div class="form-group">
                            <label>Note Aggiuntive</label>
                            <textarea rows="4" placeholder="Eventuali richieste o informazioni aggiuntive..."></textarea>
                        </div>
                        <button type="submit" class="form-submit">Invia Prenotazione</button>
                    </form>
                </div>
            </div>
        </div>
    `;
}

function getConcorsoPage() {
    return getBreadcrumb('concorso') + `
        <div class="page-content">
            <div class="container">
                <h1>🎓 Concorsi Pubblici</h1>
                <p class="subtitle">Entra a far parte della Polizia di Stato - Bandi attivi 2025</p>
                
                <div style="background: white; padding: 3rem; border-radius: 20px; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                    <h2 style="color: var(--dark-blue); margin-bottom: 2rem; font-size: 2rem;">Concorsi Attivi</h2>
                    <div style="border-left: 5px solid var(--secondary-blue); padding-left: 2rem; margin: 2rem 0; background: var(--light-blue); padding: 2rem; border-radius: 0 12px 12px 0;">
                        <h3 style="color: var(--primary-blue); margin-bottom: 0.75rem; font-size: 1.5rem;">Concorso per 1.500 Allievi Agenti</h3>
                        <p style="color: var(--text-gray); margin-bottom: 0.75rem; font-weight: 600;">📅 Scadenza: 31 Dicembre 2025</p>
                        <p style="line-height: 1.8; color: var(--text-dark);">
                            Bando per l'assunzione di 1.500 allievi agenti della Polizia di Stato. Requisiti principali: diploma di scuola secondaria superiore, 
                            cittadinanza italiana, età compresa tra 18 e 30 anni, idoneità fisica e psico-attitudinale.
                        </p>
                    </div>
                    <div style="border-left: 5px solid var(--secondary-blue); padding-left: 2rem; margin: 2rem 0; background: var(--light-blue); padding: 2rem; border-radius: 0 12px 12px 0;">
                        <h3 style="color: var(--primary-blue); margin-bottom: 0.75rem; font-size: 1.5rem;">Concorso Commissari di Polizia</h3>
                        <p style="color: var(--text-gray); margin-bottom: 0.75rem; font-weight: 600;">📅 Scadenza: 15 Gennaio 2026</p>
                        <p style="line-height: 1.8; color: var(--text-dark);">
                            Bando per l'assunzione di Commissari della Polizia di Stato. Requisiti: laurea magistrale, 
                            cittadinanza italiana, età non superiore a 30 anni.
                        </p>
                    </div>
                </div>

                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon">📝</div>
                        <h3>Requisiti</h3>
                        <p>Cittadinanza italiana, diploma di scuola superiore, età 18-30 anni, idoneità fisica e psico-attitudinale completa</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">📚</div>
                        <h3>Prove d'Esame</h3>
                        <p>Prova scritta, test psico-attitudinali, prova di efficienza fisica, accertamenti sanitari e colloquio</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">🏆</div>
                        <h3>Formazione</h3>
                        <p>Corso intensivo presso le Scuole della Polizia di Stato con retribuzione e alloggio inclusi</p>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function getLoginPage() {
    return getBreadcrumb('login') + `
        <div class="page-content section-white">
            <div class="container">
                <h1>🏛️ Area Riservata</h1>
                <p class="subtitle">Accesso esclusivo per il personale della Polizia di Stato</p>
                
                <div class="contact-form" style="max-width: 500px;">
                    <h2>Accedi al Sistema</h2>
                    <form onsubmit="handleLoginSubmit(event)">
                        <div class="form-group">
                            <label>Matricola *</label>
                            <input type="text" placeholder="Inserisci la tua matricola" required>
                        </div>
                        <div class="form-group">
                            <label>Password *</label>
                            <input type="password" placeholder="Inserisci la password" required>
                        </div>
                        <button type="submit" class="form-submit">Accedi</button>
                    </form>
                    <p style="text-align: center; margin-top: 2rem; color: var(--text-gray); font-size: 0.95rem;">
                        Area riservata esclusivamente al personale autorizzato della Polizia di Stato
                    </p>
                    <p style="text-align: center; margin-top: 1rem;">
                        <a href="#" style="color: var(--primary-blue); text-decoration: none; font-weight: 600;">Password dimenticata?</a>
                    </p>
                </div>

                <div style="max-width: 500px; margin: 2.5rem auto; background: #FEF3C7; border: 2px solid #F59E0B; padding: 2rem; border-radius: 16px;">
                    <p style="color: #92400E; text-align: center; margin: 0; font-weight: 600; line-height: 1.7;">
                        ⚠️ Accesso riservato esclusivamente al personale della Polizia di Stato. 
                        L'accesso non autorizzato è perseguibile penalmente ai sensi della legge vigente.
                    </p>
                </div>
            </div>
        </div>
    `;
}

// Event Handlers
function handlePrenotaSubmit(event) {
    event.preventDefault();
    showToast('Prenotazione inviata con successo! Riceverai una conferma via email.', 'success');
    event.target.reset();
}

function handleLoginSubmit(event) {
    event.preventDefault();
    showToast('Accesso riservato al personale autorizzato.', 'error');
}

// Event Listeners
window.addEventListener('scroll', () => {
    updateScrollProgress();
    updateBackToTop();
});

// Close dropdowns when clicking outside
document.addEventListener('click', (e) => {
    const searchContainer = document.querySelector('.search-container');
    const searchBox = document.getElementById('searchBox');
    if (searchBox && !searchContainer.contains(e.target)) {
        searchBox.classList.remove('active');
    }
    
    const langSelector = document.querySelector('.language-selector');
    const langDropdown = document.getElementById('languageDropdown');
    if (langDropdown && !langSelector.contains(e.target)) {
        langDropdown.classList.remove('active');
    }
});

// PWA Install
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    showToast('Aggiungi questa app alla home screen!', 'info');
});

// Initialize
window.addEventListener('DOMContentLoaded', () => {
    // Check dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark-mode');
        document.querySelector('.dark-mode-toggle').textContent = '☀️';
    }
    
    // Show cookie banner if not accepted
    if (!localStorage.getItem('cookiesAccepted')) {
        setTimeout(() => {
            document.getElementById('cookieBanner').classList.add('active');
        }, 2000);
    }
    
    // Set visitor count
    document.getElementById('visitorCount').textContent = visitorCount.toLocaleString();
    
    // Update visitor count every 10 seconds
    setInterval(updateVisitorCount, 10000);
    
    // Navigate to home
    navigateTo('home');
    
    // Print friendly
    window.onbeforeprint = function() {
        showToast('Preparazione stampa...', 'info');
    };
});
    </script>
</body>
</html>
